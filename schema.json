{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "CareerCompass India - Career Roadmap Schema",
  "version": "2.0",
  "description": "Enhanced schema for Indian career roadmaps with resources, exam details, and branching support",
  "type": "object",
  "required": ["roadmap_id", "meta", "graph"],
  "properties": {
    "roadmap_id": {
      "type": "string",
      "description": "Unique identifier for the career roadmap (kebab-case)",
      "examples": ["it-software-dev", "ias-civil-services"]
    },
    "meta": {
      "type": "object",
      "required": ["title", "description", "category", "icon_slug", "market_stats"],
      "properties": {
        "title": {
          "type": "string",
          "description": "Display name of the career"
        },
        "description": {
          "type": "string",
          "description": "Brief overview of the career (2-3 sentences)"
        },
        "category": {
          "type": "string",
          "description": "Primary category from normalized taxonomy",
          "enum": [
            "Government & Public Service",
            "Technology & IT",
            "Engineering",
            "Healthcare & Medical",
            "Finance & Commerce",
            "Legal & Governance",
            "Creative & Media",
            "Design & Architecture",
            "Hospitality & Tourism",
            "Defense & Specialized Services",
            "Agriculture & Allied",
            "Education & Research",
            "Business & Entrepreneurship",
            "Skilled Trades & Vocational",
            "Essential Services"
          ]
        },
        "subcategory": {
          "type": "string",
          "description": "Optional subcategory for finer classification",
          "examples": ["Civil Services", "Software Development", "Clinical Medicine"]
        },
        "icon_slug": {
          "type": "string",
          "description": "Lucide icon name for UI display"
        },
        "difficulty_level": {
          "type": "string",
          "enum": ["Beginner", "Intermediate", "Advanced", "Expert"],
          "description": "Overall difficulty based on competition, qualifications, and time investment"
        },
        "time_to_job": {
          "type": "string",
          "description": "Typical time from starting point to first job",
          "examples": ["2-3 years", "4-6 years", "6+ months"]
        },
        "success_rate": {
          "type": "string",
          "description": "Approximate success rate or competition ratio",
          "examples": ["15% (1:100 competition)", "High (>70%)", "Very Low (<1%)"]
        },
        "regional_variations": {
          "type": "boolean",
          "description": "Whether this career has significant state/regional differences"
        },
        "market_stats": {
          "type": "object",
          "required": ["average_salary_lpa", "salary_range", "top_hiring_companies", "future_scope"],
          "properties": {
            "average_salary_lpa": {
              "type": "number",
              "description": "Average salary in lakhs per annum"
            },
            "salary_range": {
              "type": "string",
              "description": "Salary range with currency",
              "examples": ["₹3L - ₹12L", "₹5L - ₹20L+"]
            },
            "top_hiring_companies": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Major employers or hiring organizations"
            },
            "future_scope": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Future trends and opportunities"
            },
            "demand_trend": {
              "type": "string",
              "enum": ["Growing", "Stable", "Declining", "Emerging"],
              "description": "Job market demand trajectory"
            }
          }
        },
        "related_job_roles": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "role": { "type": "string" },
              "avg_salary": { "type": "string" }
            }
          }
        }
      }
    },
    "resources": {
      "type": "object",
      "description": "External resources for learning and preparation",
      "properties": {
        "official_sites": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["name", "url", "type"],
            "properties": {
              "name": { "type": "string" },
              "url": { "type": "string", "format": "uri" },
              "type": {
                "type": "string",
                "enum": ["exam", "registration", "info", "notification", "syllabus", "results"]
              },
              "description": { "type": "string" }
            }
          }
        },
        "study_platforms": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["name", "url", "type"],
            "properties": {
              "name": { "type": "string" },
              "url": { "type": "string", "format": "uri" },
              "type": {
                "type": "string",
                "enum": ["free", "paid", "freemium"]
              },
              "platform": {
                "type": "string",
                "examples": ["YouTube", "Coursera", "Udemy", "NPTEL", "Unacademy", "BYJU's"]
              },
              "language": {
                "type": "string",
                "enum": ["English", "Hindi", "Both"],
                "default": "English"
              },
              "description": { "type": "string" }
            }
          }
        },
        "roadmaps_external": {
          "type": "array",
          "description": "Links to roadmap.sh or similar structured learning paths",
          "items": {
            "type": "object",
            "required": ["name", "url"],
            "properties": {
              "name": { "type": "string" },
              "url": { "type": "string", "format": "uri" },
              "relevance": {
                "type": "string",
                "enum": ["high", "medium", "low"]
              },
              "description": { "type": "string" }
            }
          }
        },
        "books": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["title", "type"],
            "properties": {
              "title": { "type": "string" },
              "author": { "type": "string" },
              "type": {
                "type": "string",
                "enum": ["textbook", "reference", "guide", "optional", "previous_papers"]
              },
              "isbn": { "type": "string" },
              "publisher": { "type": "string" },
              "year": { "type": "number" }
            }
          }
        },
        "communities": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["name", "url", "platform"],
            "properties": {
              "name": { "type": "string" },
              "url": { "type": "string", "format": "uri" },
              "platform": {
                "type": "string",
                "enum": ["Reddit", "Discord", "Telegram", "WhatsApp", "LinkedIn", "Facebook", "Quora"]
              },
              "members": { "type": "string" },
              "description": { "type": "string" }
            }
          }
        },
        "tools_and_practice": {
          "type": "array",
          "description": "Practical tools, coding platforms, mock tests, etc.",
          "items": {
            "type": "object",
            "required": ["name", "url", "type"],
            "properties": {
              "name": { "type": "string" },
              "url": { "type": "string", "format": "uri" },
              "type": {
                "type": "string",
                "examples": ["coding_platform", "mock_test", "simulator", "design_tool", "ide"]
              },
              "free": { "type": "boolean" },
              "description": { "type": "string" }
            }
          }
        },
        "youtube_channels": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["name", "url"],
            "properties": {
              "name": { "type": "string" },
              "url": { "type": "string", "format": "uri" },
              "language": {
                "type": "string",
                "enum": ["English", "Hindi", "Both"]
              },
              "subscribers": { "type": "string" },
              "focus": { "type": "string" }
            }
          }
        }
      }
    },
    "exam_details": {
      "type": "object",
      "description": "Detailed information about entrance/eligibility exams",
      "properties": {
        "exams": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["name", "conducting_body"],
            "properties": {
              "name": {
                "type": "string",
                "description": "Exam name",
                "examples": ["UPSC CSE", "JEE Main", "NEET UG"]
              },
              "conducting_body": {
                "type": "string",
                "examples": ["UPSC", "NTA", "State PSC"]
              },
              "registration_url": {
                "type": "string",
                "format": "uri"
              },
              "exam_pattern": {
                "type": "string",
                "description": "Brief description of exam structure",
                "examples": ["Prelims + Mains + Interview", "Single Paper MCQ", "CBT + Skill Test"]
              },
              "frequency": {
                "type": "string",
                "enum": ["Annual", "Biannual", "Quarterly", "On-demand", "Varies"]
              },
              "typical_dates": {
                "type": "string",
                "description": "When exam is usually conducted",
                "examples": ["Prelims: May, Mains: Sept", "January & July", "Year-round"]
              },
              "eligibility": {
                "type": "string",
                "description": "Basic eligibility criteria",
                "examples": ["Graduation, Age 21-32", "Class 12 PCM (60%+)", "B.Tech (Any branch)"]
              },
              "attempts_allowed": {
                "type": ["number", "string"],
                "examples": [6, "Unlimited", "Until age limit"]
              },
              "syllabus_url": {
                "type": "string",
                "format": "uri"
              },
              "previous_papers_url": {
                "type": "string",
                "format": "uri"
              },
              "cutoff_trends": {
                "type": "string",
                "description": "Recent cutoff marks/percentiles",
                "examples": ["General: 98+, OBC: 95+", "85 percentile (General)", "120/200"]
              },
              "exam_fee": {
                "type": "string",
                "examples": ["₹100 (Gen), ₹0 (SC/ST/Women)", "₹1000", "Free"]
              },
              "negative_marking": {
                "type": "boolean"
              },
              "total_seats": {
                "type": "string",
                "examples": ["~1000 (varies)", "50,000+", "Limited"]
              }
            }
          }
        }
      }
    },
    "graph": {
      "type": "object",
      "required": ["nodes", "edges"],
      "properties": {
        "nodes": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["id", "type", "label", "subtitle", "layer"],
            "properties": {
              "id": {
                "type": "string",
                "description": "Unique node identifier within this roadmap"
              },
              "type": {
                "type": "string",
                "enum": ["education", "exam", "degree", "license", "work", "job", "skill", "concept"],
                "description": "Type of node for icon and styling"
              },
              "label": {
                "type": "string",
                "description": "Main heading for the node"
              },
              "subtitle": {
                "type": "string",
                "description": "Additional details or context"
              },
              "layer": {
                "type": "integer",
                "description": "Vertical layer/level (0-based). Nodes in same layer are at same vertical level. UI calculates positions programmatically.",
                "minimum": 0
              },
              "duration": {
                "type": "string",
                "description": "Time spent at this stage",
                "examples": ["2 years", "6 months", "3-4 years"]
              },
              "resources": {
                "type": "array",
                "items": { "type": "string" },
                "description": "References to specific resources needed for this node"
              },
              "optional": {
                "type": "boolean",
                "description": "Whether this step is optional",
                "default": false
              }
            }
          }
        },
        "edges": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["id", "source", "target"],
            "properties": {
              "id": {
                "type": "string",
                "description": "Unique edge identifier"
              },
              "source": {
                "type": "string",
                "description": "Source node ID"
              },
              "target": {
                "type": "string",
                "description": "Target node ID"
              },
              "label": {
                "type": "string",
                "description": "Optional label for the edge (used in branching)",
                "examples": ["Frontend Path", "Backend Path", "Specialization Route"]
              },
              "type": {
                "type": "string",
                "enum": ["default", "optional", "alternative"],
                "description": "Type of connection"
              }
            }
          }
        }
      }
    },
    "alternatives_and_pivots": {
      "type": "array",
      "description": "Common career pivots or alternative paths from this career",
      "items": {
        "type": "object",
        "required": ["to_career", "description"],
        "properties": {
          "to_career": {
            "type": "string",
            "description": "roadmap_id of the alternative career"
          },
          "description": {
            "type": "string",
            "description": "Why/when this pivot makes sense"
          },
          "difficulty": {
            "type": "string",
            "enum": ["Easy", "Moderate", "Hard"]
          },
          "typical_timing": {
            "type": "string",
            "examples": ["After 2-3 years", "Mid-career", "After graduation"]
          }
        }
      }
    }
  }
}
